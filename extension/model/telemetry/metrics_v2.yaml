# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at http://mozilla.org/MPL/2.0/.

# This file defines the metrics that are recorded by the Glean SDK.
# APIs to use these pings are automatically generated at build time using
# the `glean_parser` PyPI package.

# Metrics in this file may make use of SDK reserved ping names. See
# https://mozilla.github.io/glean/book/dev/core/internal/reserved-ping-names.html
# for additional information.

---
$schema: moz://mozilla.org/schemas/glean/metrics/2-0-0

metadata:
  from_lang:
    type: string
    lifetime: ping
    send_in_pings:
      - translation
      - interaction
      - stats
      - errors
    description: |
      Translation source language.
    bugs:
      - https://github.com/mozilla/firefox-translations/issues/27
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - interaction
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10
  to_lang:
    type: string
    lifetime: ping
    send_in_pings:
      - translation
      - interaction
      - stats
      - errors
    description: |
      Translation target language.
    bugs:
      - https://github.com/mozilla/firefox-translations/issues/27
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - interaction
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10
  firefox_client_id:
    type: string
    lifetime: ping
    send_in_pings:
      - translation
      - interaction
      - stats
      - errors
    description: |
      Firefox Telemetry client id.
    bugs:
      - https://github.com/mozilla-extensions/firefox-translations/issues/92
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - technical
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10
  extension_version:
    type: string
    lifetime: ping
    send_in_pings:
      - translation
      - interaction
      - stats
      - errors
    description: |
      Extension version
    bugs:
      - https://github.com/mozilla-extensions/firefox-translations/issues/137
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - technical
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10
  extension_build_id:
    type: string
    lifetime: ping
    send_in_pings:
      - translation
      - interaction
      - stats
      - errors
    description: |
      Extension build id, indicating which git revision
      and build config was used to produce this build
    bugs:
      - https://github.com/mozilla-extensions/firefox-translations/issues/137
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - technical
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10
  bergamot_translator_version:
    type: string
    lifetime: ping
    send_in_pings:
      - translation
      - interaction
      - stats
      - errors
    description: |
      Bergamot translator engine version
    bugs:
      - https://github.com/mozilla-extensions/firefox-translations/issues/137
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - technical
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10
  system_memory:
    type: quantity
    unit: mb
    lifetime: ping
    send_in_pings:
      - translation
      - interaction
      - stats
      - errors
    description: |
      Telemetry Environment `system.memoryMB` metric
    bugs:
      - https://github.com/mozilla-extensions/firefox-translations/issues/147
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - technical
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10
  cpu_count:
    type: quantity
    unit: cpus
    lifetime: ping
    send_in_pings:
      - translation
      - interaction
      - stats
      - errors
    description: |
      Telemetry Environment `system.cpu.count` metric
    bugs:
      - https://github.com/mozilla-extensions/firefox-translations/issues/147
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - technical
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10
  cpu_cores_count:
    type: quantity
    unit: cores
    lifetime: ping
    send_in_pings:
      - translation
      - interaction
      - stats
      - errors
    description: |
      Telemetry Environment `system.cpu.cores` metric
    bugs:
      - https://github.com/mozilla-extensions/firefox-translations/issues/147
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - technical
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10
  cpu_vendor:
    type: string
    lifetime: ping
    send_in_pings:
      - translation
      - interaction
      - stats
      - errors
    description: |
      Telemetry Environment `system.cpu.vendor` metric
    bugs:
      - https://github.com/mozilla-extensions/firefox-translations/issues/147
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - technical
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10
  cpu_family:
    type: quantity
    unit: enum
    lifetime: ping
    send_in_pings:
      - translation
      - interaction
      - stats
      - errors
    description: |
      Telemetry Environment `system.cpu.family` metric
    bugs:
      - https://github.com/mozilla-extensions/firefox-translations/issues/147
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - technical
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10
  cpu_model:
    type: quantity
    unit: enum
    lifetime: ping
    send_in_pings:
      - translation
      - interaction
      - stats
      - errors
    description: |
      Telemetry Environment `system.cpu.model` metric
    bugs:
      - https://github.com/mozilla-extensions/firefox-translations/issues/147
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - technical
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10
  cpu_stepping:
    type: quantity
    unit: enum
    lifetime: ping
    send_in_pings:
      - translation
      - interaction
      - stats
      - errors
    description: |
      Telemetry Environment `system.cpu.stepping` metric
    bugs:
      - https://github.com/mozilla-extensions/firefox-translations/issues/147
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - technical
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10
  cpu_l2_cache:
    type: quantity
    unit: kb
    lifetime: ping
    send_in_pings:
      - translation
      - interaction
      - stats
      - errors
    description: |
      Telemetry Environment `system.cpu.l2cacheKB` metric
    bugs:
      - https://github.com/mozilla-extensions/firefox-translations/issues/147
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - technical
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10
  cpu_l3_cache:
    type: quantity
    unit: kb
    lifetime: ping
    send_in_pings:
      - translation
      - interaction
      - stats
      - errors
    description: |
      Telemetry Environment `system.cpu.l3cacheKB` metric
    bugs:
      - https://github.com/mozilla-extensions/firefox-translations/issues/147
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - technical
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10
  cpu_speed:
    type: quantity
    unit: mhz
    lifetime: ping
    send_in_pings:
      - translation
      - interaction
      - stats
      - errors
    description: |
      Telemetry Environment `system.cpu.speedMHz` metric
    bugs:
      - https://github.com/mozilla-extensions/firefox-translations/issues/147
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - technical
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10
  cpu_extensions:
    type: string
    lifetime: ping
    send_in_pings:
      - translation
      - interaction
      - stats
      - errors
    description: |
      Telemetry Environment `system.cpu.extensions` metric
    bugs:
      - https://github.com/mozilla-extensions/firefox-translations/issues/147
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - technical
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10

performance:
  full_page_translated_time:
    type: timespan
    lifetime: ping
    send_in_pings:
      - translation
    description: |
      Timing from "translation button pressed"
      to "full page is translated".
    bugs:
      - https://github.com/mozilla-extensions/firefox-translations/issues/155
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - technical
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10
  full_page_translated_wps:
    type: quantity
    unit: words per second
    lifetime: ping
    send_in_pings:
      - translation
    description: |
      Speed of the translation from "translation button
      pressed" to "full page is translated".
    bugs:
      - https://github.com/mozilla-extensions/firefox-translations/issues/155
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - technical
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10
  model_download_time_num:
    type: timespan
    lifetime: ping
    send_in_pings:
      - translation
    description: |
      Time spent on downloading a translation model for a language pair.
      (Renamed from model_download_time to model_download_time_num as part of
      changing type from string to quantity)
    bugs:
      - https://github.com/mozilla/firefox-translations/issues/27
      - https://github.com/mozilla-extensions/firefox-translations/issues/138
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - technical
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10
  model_load_time_num:
    type: timespan
    lifetime: ping
    send_in_pings:
      - translation
    description: |
      Time spent on loading a model into memory to start translation.
      (Renamed from model_load_time to model_load_time_num as part of
      changing type from string to quantity)
    bugs:
      - https://github.com/mozilla/firefox-translations/issues/27
      - https://github.com/mozilla-extensions/firefox-translations/issues/138
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - technical
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10
  translation_engine_time:
    type: timespan
    lifetime: ping
    send_in_pings:
      - translation
    description: |
      Time spent on translation by the translation engine.
    bugs:
      - https://github.com/mozilla/firefox-translations/issues/27
      - https://github.com/mozilla-extensions/firefox-translations/issues/155
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - technical
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10
  translation_engine_wps:
    type: quantity
    unit: words per second
    lifetime: ping
    send_in_pings:
      - translation
    description: |
      Speed of translation as measured by the translation engine.
    bugs:
      - https://github.com/mozilla/firefox-translations/issues/27
      - https://github.com/mozilla-extensions/firefox-translations/issues/155
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - technical
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10
  word_count:
    type: quantity
    unit: words
    lifetime: ping
    send_in_pings:
      - translation
    description: |
      Total number of words on the original web page.
    bugs:
      - https://github.com/mozilla/firefox-translations/issues/27
      - https://github.com/mozilla-extensions/firefox-translations/issues/166
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - technical
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10
  word_count_visible_in_viewport:
    type: quantity
    unit: words
    lifetime: ping
    send_in_pings:
      - translation
    description: |
      Total number of visible words on the original web page that
      were visible in the viewport at the time of "translation button pressed".
    bugs:
      - https://github.com/mozilla/firefox-translations/issues/27
      - https://github.com/mozilla-extensions/firefox-translations/issues/166
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - technical
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10
  translation_quality:
    type: string
    lifetime: ping
    send_in_pings:
      - translation
    description: |
      Quality estimation of translation.
    bugs:
      - https://github.com/mozilla/firefox-translations/issues/27
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - technical
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10

infobar:
  displayed:
    type: event
    lifetime: ping
    send_in_pings:
      - interaction
    description: |
      The translation infobar was automatically displayed in a browser.
    bugs:
      - https://github.com/mozilla/firefox-translations/issues/27
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - interaction
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10
  closed:
    type: event
    lifetime: ping
    send_in_pings:
      - interaction
    description: |
      The translation infobar was closed.
    bugs:
      - https://github.com/mozilla/firefox-translations/issues/27
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - interaction
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10
  translate:
    type: event
    lifetime: ping
    send_in_pings:
      - interaction
    description: |
      The "Translate" button was pressed on translation infobar.
    bugs:
      - https://github.com/mozilla/firefox-translations/issues/27
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - interaction
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10
  never_translate_lang:
    type: event
    lifetime: ping
    send_in_pings:
      - interaction
    description: |
      "Never translate language" button in the infobar options was pressed.
    bugs:
      - https://github.com/mozilla/firefox-translations/issues/27
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - interaction
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10
  never_translate_site:
    type: event
    lifetime: ping
    send_in_pings:
      - interaction
    description: |
      "Never translate site" button in the infobar options was pressed.
    bugs:
      - https://github.com/mozilla/firefox-translations/issues/27
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - interaction
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10
  not_now:
    type: event
    lifetime: ping
    send_in_pings:
      - interaction
    description: |
      "Not now" button on the infobar was pressed.
    bugs:
      - https://github.com/mozilla/firefox-translations/issues/27
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - interaction
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10
  change_lang:
    type: event
    lifetime: ping
    send_in_pings:
      - interaction
    description: |
      "This page is in" language was changed manually.
    bugs:
      - https://github.com/mozilla/firefox-translations/issues/27
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - interaction
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10
  accept_outbound:
    type: event
    lifetime: ping
    send_in_pings:
      - interaction
    description: |
      User accepts translation of forms by clicking "yes" button.
    bugs:
      - https://github.com/mozilla/firefox-translations/issues/27
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - interaction
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10

languages:
  not_supported:
    type: counter
    lifetime: ping
    send_in_pings:
      - stats
    description: |
      Language pair of user and website languages is not supported.
    bugs:
      - https://github.com/mozilla/firefox-translations/issues/27
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - interaction
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10
  lang_mismatch:
    type: counter
    lifetime: ping
    send_in_pings:
      - stats
    description: |
      The user and website languages do not match.
    bugs:
      - https://github.com/mozilla/firefox-translations/issues/27
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - interaction
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10

errors:
  translation:
    type: counter
    lifetime: ping
    send_in_pings:
      - errors
    description: |
      The translation procedure has failed.
    bugs:
      - https://github.com/mozilla/firefox-translations/issues/27
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - technical
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10
  marian:
    type: counter
    lifetime: ping
    send_in_pings:
      - errors
    description: |
      Marian code related error.
    bugs:
      - https://github.com/mozilla/firefox-translations/issues/27
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - technical
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10
  memory:
    type: counter
    lifetime: ping
    send_in_pings:
      - errors
    description: |
      Memory allocation error.
    bugs:
      - https://github.com/mozilla/firefox-translations/issues/27
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - technical
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10
  model_download:
    type: counter
    lifetime: ping
    send_in_pings:
      - errors
    description: |
      Failed to download a model for a supported language pair.
    bugs:
      - https://github.com/mozilla/firefox-translations/issues/27
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1694813
    data_sensitivity:
      - technical
    notification_emails:
      - anatal-all@mozilla.com
    expires: 2022-02-10
